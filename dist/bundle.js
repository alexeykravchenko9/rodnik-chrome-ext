!function(e){var t={};function o(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);const a=e=>{let t=window.location.href.split("&").filter(t=>t.indexOf(e)>=0?t:"").toString().split("=");return t[t.length-1]},n=e=>console.log(e);var l=class{constructor(){}static getDataTab(){let e=[],t=window.location.href.split("&"),o={summ_page:0,savinings:0,allSumm:0,allSavinings:0,startDate:a("startDate"),endDate:a("endDate"),currentPage:t[t.length-1].indexOf("page")>=0?t[t.length-1]:"page=1"},n=document.querySelectorAll(".operations-table thead tr th"),l=document.querySelectorAll(".operations-table tbody tr");Object.keys(n).forEach((t,o)=>e.push(n[o].innerText));const r=e.indexOf("Скидка, грн"),i=e.indexOf("Сумма");Object.keys(l).forEach((e,t)=>{o.summ_page+=Math.round(l[t].children[i].innerText),o.savinings+=Math.round(l[t].children[r].innerText)});let{summ_page:s,savinings:c}=o;o.allSumm+=s,o.allSavinings+=c;let{allSumm:g,allSavinings:u}=o;return console.log(`Сумма - ${s} грн`),console.log(`Скидка - ${c} грн`),console.log(`Общая сумма - ${g} грн`),console.log(`Суммарная скидка - ${u} грн`),console.log(o),o}static printHtml(e){let t=parseInt(localStorage.getItem("rodnik-ext-allSavinigs")),o=parseInt(localStorage.getItem("rodnik-ext-allSumm"));const a=document.createElement("div");a.className="b-rodnikStats-bar",a.innerHTML=`<p>Общая сумма - ${o} грн</p>\n                         <p>Суммарная скидка - ${t} грн</p>`;const n=document.querySelector("table.operations-table").parentNode,l=document.querySelector("table.operations-table");n.insertBefore(a,l)}};var r=class{constructor(){}static addToStorage(e,t){const{savinings:o,summ_page:a}=e;if(null!==localStorage.getItem("rodnik-ext-allSavinigs")&&null!==localStorage.getItem("rodnik-ext-allSumm")){let e=parseInt(localStorage.getItem("rodnik-ext-allSavinigs")),t=parseInt(localStorage.getItem("rodnik-ext-allSumm"));localStorage.setItem("rodnik-ext-allSavinigs",e+=o),localStorage.setItem("rodnik-ext-allSumm",t+=a)}else localStorage.setItem("rodnik-ext-allSavinigs",o),localStorage.setItem("rodnik-ext-allSumm",a);const n=JSON.stringify(e);this.localKey=t,localStorage.setItem(this.localKey,n)}static getFromStorage(e){return JSON.parse(localStorage.getItem(e))}};o.d(t,"EVENTTAGS",function(){return i});const i={tags:"#datepicker span.btn",id:["dateRangePreset","locationSelect","operationTypeSelect"]},s=new class{constructor(){}init(){let e=r.getFromStorage(`rodnik-ext-page=${a("page")}`);if(null===this.localStorageData){let e=l.getDataTab();r.addToStorage(e,`rodnik-ext-page=${a("page")}`),l.printHtml(r.getFromStorage(`rodnik-ext-page=${a("page")}`))}else l.printHtml(e);n(i)}};document.querySelectorAll(".operations-table tbody tr").length>0?s.init():window.localStorage.clear()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hlbHBlcnMvaGVscGVycy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlldy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsInZhbHVlIiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnZXRQYXJhbVVybFZhbCIsIm5hbWVQYXJhbSIsInRleHQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJzcGxpdCIsImZpbHRlciIsIml0ZW0iLCJpbmRleE9mIiwidG9TdHJpbmciLCJsZW5ndGgiLCJjbGVhckxvY2FsU3RvcmFnZSIsInRhZ3MiLCJjb25zb2xlIiwibG9nIiwidmlldyIsIltvYmplY3QgT2JqZWN0XSIsInRpdGxlcyIsInBhZ2VOdW0iLCJkYXRhIiwic3VtbV9wYWdlIiwic2F2aW5pbmdzIiwiYWxsU3VtbSIsImFsbFNhdmluaW5ncyIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJjdXJyZW50UGFnZSIsInRoSHRtbEVsZW1lbnRzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwidHJIdG1sRWxlbWVudHMiLCJrZXlzIiwiZm9yRWFjaCIsImluZGV4IiwicHVzaCIsImlubmVyVGV4dCIsImluZGV4U2F2aW5pbmdzIiwiaW5kZXhTdW1tIiwiTWF0aCIsInJvdW5kIiwiY2hpbGRyZW4iLCJhbGxTYXZpbmlncyIsInBhcnNlSW50IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImRpdiIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJpbm5lckhUTUwiLCJwYXJlbnREb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwYXJlbnROb2RlIiwidGFibGUiLCJpbnNlcnRCZWZvcmUiLCJtb2RlbCIsImtleSIsInNldEl0ZW0iLCJzZXJpYWxPYmoiLCJKU09OIiwic3RyaW5naWZ5IiwidGhpcyIsImxvY2FsS2V5IiwicGFyc2UiLCJFVkVOVFRBR1MiLCJpZCIsImdlbmVyYWwiLCJsb2NhbFN0b3JhZ2VEYXRhIiwiZ2V0RnJvbVN0b3JhZ2UiLCJnZXREYXRhVGFiIiwiYWRkVG9TdG9yYWdlIiwicHJpbnRIdG1sIiwiaW5pdCIsImNsZWFyIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FDQUssY0FBQSxFQUNBQyxZQUFBLEVBQ0FDLElBQUFOLEtBTUFaLEVBQUFtQixFQUFBLFNBQUFqQixHQUNBWSxPQUFBQyxlQUFBYixFQUFBLGNBQWlEa0IsT0FBQSxLQUlqRHBCLEVBQUFxQixFQUFBLFNBQUFsQixHQUNBLElBQUFTLEVBQUFULEtBQUFtQixXQUNB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TUFBQVEsR0FDQW5ELEtBQUEsdUJBQ0FvRCxJQUFBLDJEQUlBQyxFQUFBLFVDRkFqRCxlQUlBQSxPQUVBLElBQUFrRCxFQUFBWixFQUFBYSxrQ0FBdUVwRSxFQUFBLFdBRXZFLFVBQUE2RCxLQUFBTSxpQkFBQSxDQUNBLElBQUEvQyxFQUFBSixFQUFBcUQsYUFFQWQsRUFBQWUsYUFBQWxELHFCQUF3RHBCLEVBQUEsV0FFeERnQixFQUFBdUQsVUFBQWhCLEVBQUFhLGtDQUFvRXBFLEVBQUEsaUJBR3BFZ0IsRUFBQXVELFVBQUFKLEdBR0F2RCxFQUFBb0QsS0RmQW5DLFNBQUFDLGlCQUFBLDhCQUFBbkIsT0FBQSxFQUNBdUQsRUFBQU0sT0FFQXJFLE9BQUF5QyxhQUFBNkIiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBjb25zdCBnZXRQYXJhbVVybFZhbCA9IChuYW1lUGFyYW0pID0+IHtcbiAgICBsZXQgcGFyYW1BcnIgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgnJicpLmZpbHRlciggKGl0ZW0pID0+IChpdGVtLmluZGV4T2YobmFtZVBhcmFtKSA+PSAwKSA/IGl0ZW0gOiAnJyApO1xuICAgIGxldCB0ZXh0ID0gcGFyYW1BcnIudG9TdHJpbmcoKS5zcGxpdCgnPScpO1xuXG4gICAgcmV0dXJuIHRleHRbdGV4dC5sZW5ndGggLSAxXTtcbn07XG5cbmV4cG9ydCBjb25zdCBjbGVhckxvY2FsU3RvcmFnZSA9ICh0YWdzKSA9PiB7XG5cblxuXG4gICAgLy8gbGV0IGRhdGVwaWNrZXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjZGF0ZXBpY2tlciBzcGFuLmJ0bicpO1xuICAgIC8vIGxldCBzZWxlY3RCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0ZVJhbmdlUHJlc2V0Jyk7XG4gICAgLy9cbiAgICAvL1xuICAgIC8vIGNvbnNvbGUubG9nKE9iamVjdC5rZXlzKGRhdGVwaWNrZXJCdG4pLCAnRGF0ZXBpY2tlcicpO1xuICAgIC8vIGNvbnNvbGUubG9nKE9iamVjdC5rZXlzKHNlbGVjdEJ0biksICdTZWxlY3QnKTtcbiAgICAvL1xuICAgIC8vIHNlbGVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiAgd2luZG93LmxvY2FsU3RvcmFnZS5jbGVhcigpKTtcbiAgICAvL1xuICAgIC8vIGRhdGVwaWNrZXJCdG5bMF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiAgd2luZG93LmxvY2FsU3RvcmFnZS5jbGVhcigpKTtcblxuXG4gICAgcmV0dXJuIGNvbnNvbGUubG9nKHRhZ3MpO1xufTtcblxuIiwiaW1wb3J0IHsgZ2V0UGFyYW1VcmxWYWwgfSBmcm9tICcuL2hlbHBlcnMvaGVscGVycyc7XG5cbmNsYXNzIFZpZXcge1xuICAgIGNvbnN0cnVjdG9yKCl7XG5cbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0RGF0YVRhYigpe1xuXG4gICAgICAgIGxldCB0aXRsZXMgPSBbXTtcblxuICAgICAgICBsZXQgcGFnZU51bSA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCcmJyk7XG5cbiAgICAgICAgbGV0IGRhdGEgPSB7XG4gICAgICAgICAgICBzdW1tX3BhZ2U6IDAsXG4gICAgICAgICAgICBzYXZpbmluZ3M6IDAsXG4gICAgICAgICAgICBhbGxTdW1tOiAwLFxuICAgICAgICAgICAgYWxsU2F2aW5pbmdzOiAwLFxuICAgICAgICAgICAgc3RhcnREYXRlOiBnZXRQYXJhbVVybFZhbCgnc3RhcnREYXRlJyksXG4gICAgICAgICAgICBlbmREYXRlOiBnZXRQYXJhbVVybFZhbCgnZW5kRGF0ZScpLFxuICAgICAgICAgICAgY3VycmVudFBhZ2U6IChwYWdlTnVtW3BhZ2VOdW0ubGVuZ3RoIC0gMV0uaW5kZXhPZigncGFnZScpID49IDAgKSA/IHBhZ2VOdW1bcGFnZU51bS5sZW5ndGggLSAxXSA6ICdwYWdlPTEnXG4gICAgICAgIH07XG5cbiAgICAgICAgbGV0IHRoSHRtbEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm9wZXJhdGlvbnMtdGFibGUgdGhlYWQgdHIgdGgnKTtcbiAgICAgICAgbGV0IHRySHRtbEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm9wZXJhdGlvbnMtdGFibGUgdGJvZHkgdHInKTtcblxuICAgICAgICBPYmplY3Qua2V5cyh0aEh0bWxFbGVtZW50cykuZm9yRWFjaCggKGl0ZW0sIGluZGV4KSA9PiB0aXRsZXMucHVzaCh0aEh0bWxFbGVtZW50c1tpbmRleF0uaW5uZXJUZXh0KSApO1xuXG4gICAgICAgIGNvbnN0IGluZGV4U2F2aW5pbmdzID0gdGl0bGVzLmluZGV4T2YoJ9Ch0LrQuNC00LrQsCwg0LPRgNC9Jyk7XG4gICAgICAgIGNvbnN0IGluZGV4U3VtbSA9IHRpdGxlcy5pbmRleE9mKCfQodGD0LzQvNCwJyk7XG5cbiAgICAgICAgT2JqZWN0LmtleXModHJIdG1sRWxlbWVudHMpLmZvckVhY2goIChpdGVtLCBpbmRleCkgPT4ge1xuXG4gICAgICAgICAgICBkYXRhLnN1bW1fcGFnZSArPSBNYXRoLnJvdW5kKHRySHRtbEVsZW1lbnRzW2luZGV4XS5jaGlsZHJlbltpbmRleFN1bW1dLmlubmVyVGV4dCk7XG4gICAgICAgICAgICBkYXRhLnNhdmluaW5ncyArPSBNYXRoLnJvdW5kKHRySHRtbEVsZW1lbnRzW2luZGV4XS5jaGlsZHJlbltpbmRleFNhdmluaW5nc10uaW5uZXJUZXh0KTtcblxuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgeyBzdW1tX3BhZ2UsIHNhdmluaW5ncyB9ID0gZGF0YTtcblxuICAgICAgICBkYXRhLmFsbFN1bW0gKz0gc3VtbV9wYWdlO1xuICAgICAgICBkYXRhLmFsbFNhdmluaW5ncyArPSBzYXZpbmluZ3M7XG5cbiAgICAgICAgbGV0IHsgYWxsU3VtbSwgYWxsU2F2aW5pbmdzIH0gPSBkYXRhO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGDQodGD0LzQvNCwIC0gJHtzdW1tX3BhZ2V9INCz0YDQvWApO1xuICAgICAgICBjb25zb2xlLmxvZyhg0KHQutC40LTQutCwIC0gJHtzYXZpbmluZ3N9INCz0YDQvWApO1xuICAgICAgICBjb25zb2xlLmxvZyhg0J7QsdGJ0LDRjyDRgdGD0LzQvNCwIC0gJHthbGxTdW1tfSDQs9GA0L1gKTtcbiAgICAgICAgY29uc29sZS5sb2coYNCh0YPQvNC80LDRgNC90LDRjyDRgdC60LjQtNC60LAgLSAke2FsbFNhdmluaW5nc30g0LPRgNC9YCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuXG4gICAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgfVxuXG4gICAgc3RhdGljIHByaW50SHRtbChkYXRhKXtcblxuICAgICAgICBsZXQgYWxsU2F2aW5pZ3MgPSBwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncm9kbmlrLWV4dC1hbGxTYXZpbmlncycpKTtcbiAgICAgICAgbGV0IGFsbFN1bW0gPSBwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncm9kbmlrLWV4dC1hbGxTdW1tJykpO1xuXG4gICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBkaXYuY2xhc3NOYW1lID0gJ2Itcm9kbmlrU3RhdHMtYmFyJztcbiAgICAgICAgZGl2LmlubmVySFRNTCA9IGA8cD7QntCx0YnQsNGPINGB0YPQvNC80LAgLSAke2FsbFN1bW19INCz0YDQvTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICA8cD7QodGD0LzQvNCw0YDQvdCw0Y8g0YHQutC40LTQutCwIC0gJHthbGxTYXZpbmlnc30g0LPRgNC9PC9wPmA7XG5cbiAgICAgICAgY29uc3QgcGFyZW50RG9jdW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0YWJsZS5vcGVyYXRpb25zLXRhYmxlJykucGFyZW50Tm9kZTtcbiAgICAgICAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0YWJsZS5vcGVyYXRpb25zLXRhYmxlJyk7XG5cbiAgICAgICAgcGFyZW50RG9jdW1lbnQuaW5zZXJ0QmVmb3JlKGRpdiwgdGFibGUpO1xuXG4gICAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IFZpZXc7IiwiY2xhc3MgTW9kZWx7XG4gICAgY29uc3RydWN0b3IoKXtcblxuICAgIH1cblxuICAgIHN0YXRpYyBhZGRUb1N0b3JhZ2UoZGF0YSwga2V5KXtcblxuICAgICAgICBjb25zdCB7IHNhdmluaW5ncywgc3VtbV9wYWdlIH0gPSBkYXRhO1xuXG5cbiAgICAgICAgaWYoIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdyb2RuaWstZXh0LWFsbFNhdmluaWdzJykgIT09IG51bGwgJiYgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3JvZG5pay1leHQtYWxsU3VtbScpICE9PSBudWxsKXtcblxuICAgICAgICAgICAgbGV0IGFsbFNhdmluaWdzID0gcGFyc2VJbnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3JvZG5pay1leHQtYWxsU2F2aW5pZ3MnKSk7XG4gICAgICAgICAgICBsZXQgYWxsU3VtbSA9IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdyb2RuaWstZXh0LWFsbFN1bW0nKSk7XG5cbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyb2RuaWstZXh0LWFsbFNhdmluaWdzJywgYWxsU2F2aW5pZ3MgKz0gc2F2aW5pbmdzICk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncm9kbmlrLWV4dC1hbGxTdW1tJywgYWxsU3VtbSArPSBzdW1tX3BhZ2UgKTtcblxuXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyb2RuaWstZXh0LWFsbFNhdmluaWdzJywgc2F2aW5pbmdzKTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyb2RuaWstZXh0LWFsbFN1bW0nLCBzdW1tX3BhZ2UpO1xuXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzZXJpYWxPYmogPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcblxuICAgICAgICB0aGlzLmxvY2FsS2V5ID0ga2V5O1xuXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMubG9jYWxLZXksIHNlcmlhbE9iaik7XG5cbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0RnJvbVN0b3JhZ2Uoa2V5KXtcbiAgICAgICAgY29uc3Qgb2JqID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgTW9kZWw7IiwiaW1wb3J0IENvbnRyb2xsZXIgZnJvbSAnLi9jb250cm9sbGVyJztcblxuZXhwb3J0IGNvbnN0IEVWRU5UVEFHUyA9IHtcbiAgICB0YWdzOiAnI2RhdGVwaWNrZXIgc3Bhbi5idG4nLFxuICAgIGlkOiBbJ2RhdGVSYW5nZVByZXNldCcsICdsb2NhdGlvblNlbGVjdCcsICdvcGVyYXRpb25UeXBlU2VsZWN0J11cbn07XG5cblxuY29uc3QgZ2VuZXJhbCA9IG5ldyBDb250cm9sbGVyKCk7XG5cbmlmKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub3BlcmF0aW9ucy10YWJsZSB0Ym9keSB0cicpLmxlbmd0aCA+IDAgKXtcbiAgICBnZW5lcmFsLmluaXQoKTtcbn0gZWxzZSB7XG4gICAgd2luZG93LmxvY2FsU3RvcmFnZS5jbGVhcigpO1xufVxuXG4vL1xuLy8gKGZ1bmN0aW9uKCl7XG4vL1xuLy9cbi8vICAgICAvL1xuLy8gICAgIC8vIGNocm9tZS50YWJzLnF1ZXJ5KHsgYWN0aXZlOiB0cnVlLCBjdXJyZW50V2luZG93OiB0cnVlIH0sICh0YWJzKSA9PiB7XG4vLyAgICAgLy8gICAgIGxldCB0YWIgPSB0YWJzWzBdXG4vLyAgICAgLy8gICAgIGNvbnNvbGUubG9nKHRhYik7XG4vLyAgICAgLy9cbi8vICAgICAvLyB9KTtcbi8vXG4vL1xuLy8gICAgIC8vIGNocm9tZS50YWJzLmV4ZWN1dGVTY3JpcHQobnVsbCwge2ZpbGU6IFwiLi9kaXN0L2pzL2VuZ2luZS5qc1wifSk7XG4vL1xuLy8gICAgIC8vXG4vLyAgICAgLy8gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbi8vICAgICAvL1xuLy8gICAgIC8vIH0pO1xuLy9cbi8vXG4vL1xuLy8gfSkoKTtcbiIsImltcG9ydCBWaWV3IGZyb20gJy4vdmlldyc7XG5pbXBvcnQgTW9kZWwgZnJvbSAnLi9tb2RlbCc7XG5pbXBvcnQgeyBnZXRQYXJhbVVybFZhbCwgY2xlYXJMb2NhbFN0b3JhZ2UgfSBmcm9tICcuL2hlbHBlcnMvaGVscGVycyc7XG5pbXBvcnQgeyBFVkVOVFRBR1MgfSBmcm9tICcuL2luZGV4JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IoKXtcblxuICAgIH1cblxuICAgIGluaXQoKXtcblxuICAgICAgICBsZXQgbG9jYWxTdG9yYWdlRGF0YSA9IE1vZGVsLmdldEZyb21TdG9yYWdlKGByb2RuaWstZXh0LXBhZ2U9JHtnZXRQYXJhbVVybFZhbCgncGFnZScpfWApO1xuXG4gICAgICAgIGlmKHRoaXMubG9jYWxTdG9yYWdlRGF0YSA9PT0gbnVsbCl7XG4gICAgICAgICAgICBsZXQgZGF0YSA9IFZpZXcuZ2V0RGF0YVRhYigpO1xuXG4gICAgICAgICAgICBNb2RlbC5hZGRUb1N0b3JhZ2UoZGF0YSwgYHJvZG5pay1leHQtcGFnZT0ke2dldFBhcmFtVXJsVmFsKCdwYWdlJyl9YCk7XG5cbiAgICAgICAgICAgIFZpZXcucHJpbnRIdG1sKCBNb2RlbC5nZXRGcm9tU3RvcmFnZShgcm9kbmlrLWV4dC1wYWdlPSR7Z2V0UGFyYW1VcmxWYWwoJ3BhZ2UnKX1gKSApO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBWaWV3LnByaW50SHRtbChsb2NhbFN0b3JhZ2VEYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsZWFyTG9jYWxTdG9yYWdlKEVWRU5UVEFHUyk7XG4gXG4gICAgfVxuXG59XG4iXSwic291cmNlUm9vdCI6IiJ9