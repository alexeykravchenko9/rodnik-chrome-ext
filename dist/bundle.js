!function(e){var t={};function o(a){if(t[a])return t[a].exports;var l=t[a]={i:a,l:!1,exports:{}};return e[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}o.m=e,o.c=t,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);const a=e=>{let t=window.location.href.split("&").filter(t=>t.indexOf(e)>=0?t:"").toString().split("=");return t[t.length-1]};var l=class{constructor(){}static getDataTab(){let e=[],t=window.location.href.split("&"),o={summ_page:0,savinings:0,allSumm:0,allSavinings:0,startDate:a("startDate"),endDate:a("endDate"),currentPage:t[t.length-1].indexOf("page")>=0?t[t.length-1]:"page=1"},l=document.querySelectorAll(".operations-table thead tr th"),n=document.querySelectorAll(".operations-table tbody tr");Object.keys(l).forEach((t,o)=>e.push(l[o].innerText));const r=e.indexOf("Скидка, грн"),i=e.indexOf("Сумма");Object.keys(n).forEach((e,t)=>{o.summ_page+=Math.round(n[t].children[i].innerText),o.savinings+=Math.round(n[t].children[r].innerText)});let{summ_page:s,savinings:c}=o;o.allSumm+=s,o.allSavinings+=c;let{allSumm:g,allSavinings:u}=o;return console.log(`Сумма - ${s} грн`),console.log(`Скидка - ${c} грн`),console.log(`Общая сумма - ${g} грн`),console.log(`Суммарная скидка - ${u} грн`),console.log(o),o}static printHtml(e){let t=parseInt(localStorage.getItem("rodnik-ext-allSavinigs")),o=parseInt(localStorage.getItem("rodnik-ext-allSumm"));const a=document.createElement("div");a.className="b-rodnikStats-bar",a.innerHTML=`<p>Общая сумма - ${o} грн</p>\n                         <p>Суммарная скидка - ${t} грн</p>`;const l=document.querySelector("table.operations-table").parentNode,n=document.querySelector("table.operations-table");l.insertBefore(a,n)}};var n=class{constructor(){}static addToStorage(e,t){const{savinings:o,summ_page:a}=e;if(null!==localStorage.getItem("rodnik-ext-allSavinigs")&&null!==localStorage.getItem("rodnik-ext-allSumm")){let e=parseInt(localStorage.getItem("rodnik-ext-allSavinigs")),t=parseInt(localStorage.getItem("rodnik-ext-allSumm"));localStorage.setItem("rodnik-ext-allSavinigs",e+=o),localStorage.setItem("rodnik-ext-allSumm",t+=a)}else localStorage.setItem("rodnik-ext-allSavinigs",o),localStorage.setItem("rodnik-ext-allSumm",a);const l=JSON.stringify(e);this.localKey=t,localStorage.setItem(this.localKey,l)}static getFromStorage(e){return JSON.parse(localStorage.getItem(e))}};document.querySelectorAll(".operations-table tbody tr").length>0?class{constructor(e){this.name=e}static init(){let e=n.getFromStorage(`rodnik-ext-page=${a("page")}`);if(console.log(e),null===e){let e=l.getDataTab();n.addToStorage(e,`rodnik-ext-page=${a("page")}`),l.printHtml(n.getFromStorage(`rodnik-ext-page=${a("page")}`))}else l.printHtml(e)}}.init():window.localStorage.clear()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hlbHBlcnMvaGVscGVycy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlldy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsInZhbHVlIiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnZXRQYXJhbVVybFZhbCIsIm5hbWVQYXJhbSIsInRleHQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJzcGxpdCIsImZpbHRlciIsIml0ZW0iLCJpbmRleE9mIiwidG9TdHJpbmciLCJsZW5ndGgiLCJ2aWV3IiwiW29iamVjdCBPYmplY3RdIiwidGl0bGVzIiwicGFnZU51bSIsImRhdGEiLCJzdW1tX3BhZ2UiLCJzYXZpbmluZ3MiLCJhbGxTdW1tIiwiYWxsU2F2aW5pbmdzIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsImN1cnJlbnRQYWdlIiwidGhIdG1sRWxlbWVudHMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ0ckh0bWxFbGVtZW50cyIsImtleXMiLCJmb3JFYWNoIiwiaW5kZXgiLCJwdXNoIiwiaW5uZXJUZXh0IiwiaW5kZXhTYXZpbmluZ3MiLCJpbmRleFN1bW0iLCJNYXRoIiwicm91bmQiLCJjaGlsZHJlbiIsImNvbnNvbGUiLCJsb2ciLCJhbGxTYXZpbmlncyIsInBhcnNlSW50IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImRpdiIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJpbm5lckhUTUwiLCJwYXJlbnREb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwYXJlbnROb2RlIiwidGFibGUiLCJpbnNlcnRCZWZvcmUiLCJtb2RlbCIsImtleSIsInNldEl0ZW0iLCJzZXJpYWxPYmoiLCJKU09OIiwic3RyaW5naWZ5IiwidGhpcyIsImxvY2FsS2V5IiwicGFyc2UiLCJsb2NhbFN0b3JhZ2VEYXRhIiwiZ2V0RnJvbVN0b3JhZ2UiLCJnZXREYXRhVGFiIiwiYWRkVG9TdG9yYWdlIiwicHJpbnRIdG1sIiwiaW5pdCIsImNsZWFyIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FDQUssY0FBQSxFQUNBQyxZQUFBLEVBQ0FDLElBQUFOLEtBTUFaLEVBQUFtQixFQUFBLFNBQUFqQixHQUNBWSxPQUFBQyxlQUFBYixFQUFBLGNBQWlEa0IsT0FBQSxLQUlqRHBCLEVBQUFxQixFQUFBLFNBQUFsQixHQUNBLElBQUFTLEVBQUFULEtBQUFtQixXQUNBLFdBQTJCLE9BQUFuQixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFILEVBQUFV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RUFBQVUsa0NBQXVFL0QsRUFBQSxXQUd2RSxHQUZBc0MsUUFBQUMsSUFBQXVCLEdBRUEsT0FBQUEsRUFBQSxDQUNBLElBQUE5QyxFQUFBSixFQUFBb0QsYUFJQVgsRUFBQVksYUFBQWpELHFCQUF3RGhCLEVBQUEsV0FHeERZLEVBQUFzRCxVQUFBYixFQUFBVSxrQ0FBb0UvRCxFQUFBLGlCQUtwRVksRUFBQXNELFVBQUFKLEtEdEJBSyxPQUVBaEUsT0FBQXVDLGFBQUEwQiIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGNvbnN0IGdldFBhcmFtVXJsVmFsID0gKG5hbWVQYXJhbSkgPT4ge1xuICAgIGxldCBwYXJhbUFyciA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCcmJykuZmlsdGVyKCAoaXRlbSkgPT4gKGl0ZW0uaW5kZXhPZihuYW1lUGFyYW0pID49IDApID8gaXRlbSA6ICcnICk7XG4gICAgbGV0IHRleHQgPSBwYXJhbUFyci50b1N0cmluZygpLnNwbGl0KCc9Jyk7XG5cbiAgICByZXR1cm4gdGV4dFt0ZXh0Lmxlbmd0aCAtIDFdO1xufTtcblxuZXhwb3J0IGNvbnN0IGNsZWFyTG9jYWxTdG9yYWdlID0gKCkgPT4ge1xuICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbn1cbiIsImltcG9ydCB7IGdldFBhcmFtVXJsVmFsLCBjbGVhckxvY2FsU3RvcmFnZSB9IGZyb20gJy4vaGVscGVycy9oZWxwZXJzJztcblxuY2xhc3MgVmlldyB7XG4gICAgY29uc3RydWN0b3IoKXtcblxuICAgIH1cblxuICAgIHN0YXRpYyBnZXREYXRhVGFiKCl7XG5cbiAgICAgICAgbGV0IHRpdGxlcyA9IFtdO1xuXG4gICAgICAgIGxldCBwYWdlTnVtID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJyYnKTtcblxuICAgICAgICBsZXQgZGF0YSA9IHtcbiAgICAgICAgICAgIHN1bW1fcGFnZTogMCxcbiAgICAgICAgICAgIHNhdmluaW5nczogMCxcbiAgICAgICAgICAgIGFsbFN1bW06IDAsXG4gICAgICAgICAgICBhbGxTYXZpbmluZ3M6IDAsXG4gICAgICAgICAgICBzdGFydERhdGU6IGdldFBhcmFtVXJsVmFsKCdzdGFydERhdGUnKSxcbiAgICAgICAgICAgIGVuZERhdGU6IGdldFBhcmFtVXJsVmFsKCdlbmREYXRlJyksXG4gICAgICAgICAgICBjdXJyZW50UGFnZTogKHBhZ2VOdW1bcGFnZU51bS5sZW5ndGggLSAxXS5pbmRleE9mKCdwYWdlJykgPj0gMCApID8gcGFnZU51bVtwYWdlTnVtLmxlbmd0aCAtIDFdIDogJ3BhZ2U9MSdcbiAgICAgICAgfTtcblxuXG5cblxuICAgICAgICBsZXQgdGhIdG1sRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub3BlcmF0aW9ucy10YWJsZSB0aGVhZCB0ciB0aCcpO1xuICAgICAgICBsZXQgdHJIdG1sRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub3BlcmF0aW9ucy10YWJsZSB0Ym9keSB0cicpO1xuXG5cbiAgICAgICAgT2JqZWN0LmtleXModGhIdG1sRWxlbWVudHMpLmZvckVhY2goIChpdGVtLCBpbmRleCkgPT4gdGl0bGVzLnB1c2godGhIdG1sRWxlbWVudHNbaW5kZXhdLmlubmVyVGV4dCkgKTtcblxuICAgICAgICBjb25zdCBpbmRleFNhdmluaW5ncyA9IHRpdGxlcy5pbmRleE9mKCfQodC60LjQtNC60LAsINCz0YDQvScpO1xuICAgICAgICBjb25zdCBpbmRleFN1bW0gPSB0aXRsZXMuaW5kZXhPZign0KHRg9C80LzQsCcpO1xuXG5cbiAgICAgICAgT2JqZWN0LmtleXModHJIdG1sRWxlbWVudHMpLmZvckVhY2goIChpdGVtLCBpbmRleCkgPT4ge1xuXG4gICAgICAgICAgICBkYXRhLnN1bW1fcGFnZSArPSBNYXRoLnJvdW5kKHRySHRtbEVsZW1lbnRzW2luZGV4XS5jaGlsZHJlbltpbmRleFN1bW1dLmlubmVyVGV4dCk7XG4gICAgICAgICAgICBkYXRhLnNhdmluaW5ncyArPSBNYXRoLnJvdW5kKHRySHRtbEVsZW1lbnRzW2luZGV4XS5jaGlsZHJlbltpbmRleFNhdmluaW5nc10uaW5uZXJUZXh0KTtcblxuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgeyBzdW1tX3BhZ2UsIHNhdmluaW5ncyB9ID0gZGF0YTtcblxuICAgICAgICBkYXRhLmFsbFN1bW0gKz0gc3VtbV9wYWdlO1xuICAgICAgICBkYXRhLmFsbFNhdmluaW5ncyArPSBzYXZpbmluZ3M7XG5cbiAgICAgICAgbGV0IHsgYWxsU3VtbSwgYWxsU2F2aW5pbmdzIH0gPSBkYXRhO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGDQodGD0LzQvNCwIC0gJHtzdW1tX3BhZ2V9INCz0YDQvWApO1xuICAgICAgICBjb25zb2xlLmxvZyhg0KHQutC40LTQutCwIC0gJHtzYXZpbmluZ3N9INCz0YDQvWApO1xuICAgICAgICBjb25zb2xlLmxvZyhg0J7QsdGJ0LDRjyDRgdGD0LzQvNCwIC0gJHthbGxTdW1tfSDQs9GA0L1gKTtcbiAgICAgICAgY29uc29sZS5sb2coYNCh0YPQvNC80LDRgNC90LDRjyDRgdC60LjQtNC60LAgLSAke2FsbFNhdmluaW5nc30g0LPRgNC9YCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuXG5cbiAgICAgICAgcmV0dXJuIGRhdGE7XG5cblxuICAgIH1cblxuXG5cbiAgICBzdGF0aWMgcHJpbnRIdG1sKGRhdGEpe1xuXG4gICAgICAgIGxldCBhbGxTYXZpbmlncyA9IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdyb2RuaWstZXh0LWFsbFNhdmluaWdzJykpO1xuICAgICAgICBsZXQgYWxsU3VtbSA9IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdyb2RuaWstZXh0LWFsbFN1bW0nKSk7XG5cbiAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGRpdi5jbGFzc05hbWUgPSAnYi1yb2RuaWtTdGF0cy1iYXInO1xuICAgICAgICBkaXYuaW5uZXJIVE1MID0gYDxwPtCe0LHRidCw0Y8g0YHRg9C80LzQsCAtICR7YWxsU3VtbX0g0LPRgNC9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgIDxwPtCh0YPQvNC80LDRgNC90LDRjyDRgdC60LjQtNC60LAgLSAke2FsbFNhdmluaWdzfSDQs9GA0L08L3A+YDtcblxuICAgICAgICBjb25zdCBwYXJlbnREb2N1bWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlLm9wZXJhdGlvbnMtdGFibGUnKS5wYXJlbnROb2RlO1xuICAgICAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlLm9wZXJhdGlvbnMtdGFibGUnKTtcblxuICAgICAgICBwYXJlbnREb2N1bWVudC5pbnNlcnRCZWZvcmUoZGl2LCB0YWJsZSk7XG5cbiAgICB9XG5cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBWaWV3O1xuIiwiY2xhc3MgTW9kZWx7XG4gICAgY29uc3RydWN0b3IoKXtcblxuICAgIH1cblxuICAgIHN0YXRpYyBhZGRUb1N0b3JhZ2UoZGF0YSwga2V5KXtcblxuICAgICAgICBjb25zdCB7IHNhdmluaW5ncywgc3VtbV9wYWdlIH0gPSBkYXRhO1xuXG5cbiAgICAgICAgaWYoIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdyb2RuaWstZXh0LWFsbFNhdmluaWdzJykgIT09IG51bGwgJiYgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3JvZG5pay1leHQtYWxsU3VtbScpICE9PSBudWxsKXtcblxuICAgICAgICAgICAgbGV0IGFsbFNhdmluaWdzID0gcGFyc2VJbnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3JvZG5pay1leHQtYWxsU2F2aW5pZ3MnKSk7XG4gICAgICAgICAgICBsZXQgYWxsU3VtbSA9IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdyb2RuaWstZXh0LWFsbFN1bW0nKSk7XG5cbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyb2RuaWstZXh0LWFsbFNhdmluaWdzJywgYWxsU2F2aW5pZ3MgKz0gc2F2aW5pbmdzICk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncm9kbmlrLWV4dC1hbGxTdW1tJywgYWxsU3VtbSArPSBzdW1tX3BhZ2UgKTtcblxuXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyb2RuaWstZXh0LWFsbFNhdmluaWdzJywgc2F2aW5pbmdzKTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyb2RuaWstZXh0LWFsbFN1bW0nLCBzdW1tX3BhZ2UpO1xuXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzZXJpYWxPYmogPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcblxuICAgICAgICB0aGlzLmxvY2FsS2V5ID0ga2V5O1xuXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMubG9jYWxLZXksIHNlcmlhbE9iaik7XG5cbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0RnJvbVN0b3JhZ2Uoa2V5KXtcbiAgICAgICAgY29uc3Qgb2JqID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG5cblxufVxuXG5leHBvcnQgZGVmYXVsdCBNb2RlbDsiLCJpbXBvcnQgQ29udHJvbGxlciBmcm9tICcuL2NvbnRyb2xsZXInO1xuXG4vLyBsZXQgY29udHIgPSBuZXcgQ29udHJvbGxlcignVGVzdCBjbGFzcycpO1xuLy8gbGV0IGRhdGFUYWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5vcGVyYXRpb25zLXRhYmxlIHRib2R5IHRyJyk7XG5cbmlmKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub3BlcmF0aW9ucy10YWJsZSB0Ym9keSB0cicpLmxlbmd0aCA+IDAgKXtcbiBcbiAgICBDb250cm9sbGVyLmluaXQoKTtcbn0gZWxzZSB7XG4gICAgd2luZG93LmxvY2FsU3RvcmFnZS5jbGVhcigpO1xufVxuLy8gY29uc29sZS5sb2coYFRlc3QgY29uZmlnICR7MSsyfWApO1xuXG4vL1xuLy8gKGZ1bmN0aW9uKCl7XG4vL1xuLy9cbi8vICAgICAvL1xuLy8gICAgIC8vIGNocm9tZS50YWJzLnF1ZXJ5KHsgYWN0aXZlOiB0cnVlLCBjdXJyZW50V2luZG93OiB0cnVlIH0sICh0YWJzKSA9PiB7XG4vLyAgICAgLy8gICAgIGxldCB0YWIgPSB0YWJzWzBdXG4vLyAgICAgLy8gICAgIGNvbnNvbGUubG9nKHRhYik7XG4vLyAgICAgLy9cbi8vICAgICAvLyB9KTtcbi8vXG4vL1xuLy8gICAgIC8vIGNocm9tZS50YWJzLmV4ZWN1dGVTY3JpcHQobnVsbCwge2ZpbGU6IFwiLi9kaXN0L2pzL2VuZ2luZS5qc1wifSk7XG4vL1xuLy8gICAgIC8vXG4vLyAgICAgLy8gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbi8vICAgICAvL1xuLy8gICAgIC8vIH0pO1xuLy9cbi8vXG4vL1xuLy8gfSkoKTtcbiIsImltcG9ydCBWaWV3IGZyb20gJy4vdmlldyc7XG5pbXBvcnQgTW9kZWwgZnJvbSAnLi9tb2RlbCc7XG5pbXBvcnQgeyBnZXRQYXJhbVVybFZhbCB9IGZyb20gJy4vaGVscGVycy9oZWxwZXJzJztcblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lKXtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcblxuICAgIH1cblxuICAgIHN0YXRpYyBpbml0KCl7XG5cbiAgICAgICAgbGV0IGxvY2FsU3RvcmFnZURhdGEgPSBNb2RlbC5nZXRGcm9tU3RvcmFnZShgcm9kbmlrLWV4dC1wYWdlPSR7Z2V0UGFyYW1VcmxWYWwoJ3BhZ2UnKX1gKTtcbiAgICAgICAgY29uc29sZS5sb2cobG9jYWxTdG9yYWdlRGF0YSk7XG5cbiAgICAgICAgaWYobG9jYWxTdG9yYWdlRGF0YSA9PT0gbnVsbCl7XG4gICAgICAgICAgICBsZXQgZGF0YSA9IFZpZXcuZ2V0RGF0YVRhYigpO1xuXG4gICAgICAgICAgICAvLyBNb2RlbC5hZGRDb3VudFN1bW0oYHJvZG5pay1leHQtcGFnZT0ke2dldFBhcmFtVXJsVmFsKCdwYWdlJyl9YCk7XG5cbiAgICAgICAgICAgIE1vZGVsLmFkZFRvU3RvcmFnZShkYXRhLCBgcm9kbmlrLWV4dC1wYWdlPSR7Z2V0UGFyYW1VcmxWYWwoJ3BhZ2UnKX1gKTtcblxuXG4gICAgICAgICAgICBWaWV3LnByaW50SHRtbCggTW9kZWwuZ2V0RnJvbVN0b3JhZ2UoYHJvZG5pay1leHQtcGFnZT0ke2dldFBhcmFtVXJsVmFsKCdwYWdlJyl9YCkgKTtcblxuXG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFZpZXcucHJpbnRIdG1sKGxvY2FsU3RvcmFnZURhdGEpO1xuXG4gICAgICAgIH1cblxuXG5cblxuXG5cblxuXG4gICAgfVxuXG59XG4iXSwic291cmNlUm9vdCI6IiJ9