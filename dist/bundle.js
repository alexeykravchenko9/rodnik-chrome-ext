!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const o=e=>{let t=window.location.href.split("&").filter(t=>t.indexOf(e)>=0?t:"").toString().split("=");return t[t.length-1]};var a=class{constructor(){}static getDataTab(){let e=[],t=window.location.href.split("&"),n={summ_page:0,savinings:0,allSumm:0,allSavinings:0,startDate:o("startDate"),endDate:o("endDate"),currentPage:t[t.length-1].indexOf("page")>=0?t[t.length-1]:"page=1"},a=document.querySelectorAll(".operations-table thead tr th"),r=document.querySelectorAll(".operations-table tbody tr");Object.keys(a).forEach((t,n)=>e.push(a[n].innerText));const l=e.indexOf("Скидка, грн"),i=e.indexOf("Сумма");Object.keys(r).forEach((e,t)=>{n.summ_page+=Math.round(r[t].children[i].innerText),n.savinings+=Math.round(r[t].children[l].innerText)});let{summ_page:s,savinings:c}=n;n.allSumm+=s,n.allSavinings+=c;let{allSumm:g,allSavinings:u}=n;return console.log(`Сумма - ${s} грн`),console.log(`Скидка - ${c} грн`),console.log(`Общая сумма - ${g} грн`),console.log(`Суммарная скидка - ${u} грн`),console.log(n),n}static printHtml(e){const t=document.createElement("div");t.className="b-rodnikStats-bar",t.innerHTML=`<p>Сумма - ${e.summ_page} грн</p>\n                         <p>Скидка - ${e.savinings} грн</p>\n                         <p>Общая сумма - ${e.allSumm} грн</p>\n                         <p>Суммарная скидка - ${e.allSavinings} грн</p>`;const n=document.querySelector("table.operations-table").parentNode,o=document.querySelector("table.operations-table");n.insertBefore(t,o)}};var r=class{constructor(){}static addToStorage(e,t){let n={};for(let e=1;e<=localStorage.length;e++)n[e]=JSON.parse(localStorage.getItem(`rodnik-ext-page=${e}`));console.log("addToStorage",n),Object.keys(n).forEach(t=>{e.allSavinings+=n[t].savinings,e.allSumm+=n[t].summ_page});const o=JSON.stringify(e);this.localKey=t,localStorage.setItem(this.localKey,o)}static getFromStorage(e){return JSON.parse(localStorage.getItem(e))}};(class{constructor(e){this.name=e}static init(){console.log(o("page"));let e=r.getFromStorage(`rodnik-ext-page=${o("page")}`);if(console.log(e),null===e){let e=a.getDataTab();r.addToStorage(e,`rodnik-ext-page=${o("page")}`),a.printHtml(r.getFromStorage(`rodnik-ext-page=${o("page")}`))}else a.printHtml(e)}}).init()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hlbHBlcnMvaGVscGVycy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlldy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsInZhbHVlIiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnZXRQYXJhbVVybFZhbCIsIm5hbWVQYXJhbSIsInRleHQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJzcGxpdCIsImZpbHRlciIsIml0ZW0iLCJpbmRleE9mIiwidG9TdHJpbmciLCJsZW5ndGgiLCJ2aWV3IiwiW29iamVjdCBPYmplY3RdIiwidGl0bGVzIiwicGFnZU51bSIsImRhdGEiLCJzdW1tX3BhZ2UiLCJzYXZpbmluZ3MiLCJhbGxTdW1tIiwiYWxsU2F2aW5pbmdzIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsImN1cnJlbnRQYWdlIiwidGhIdG1sRWxlbWVudHMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ0ckh0bWxFbGVtZW50cyIsImtleXMiLCJmb3JFYWNoIiwiaW5kZXgiLCJwdXNoIiwiaW5uZXJUZXh0IiwiaW5kZXhTYXZpbmluZ3MiLCJpbmRleFN1bW0iLCJNYXRoIiwicm91bmQiLCJjaGlsZHJlbiIsImNvbnNvbGUiLCJsb2ciLCJkaXYiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiaW5uZXJIVE1MIiwicGFyZW50RG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicGFyZW50Tm9kZSIsInRhYmxlIiwiaW5zZXJ0QmVmb3JlIiwibW9kZWwiLCJrZXkiLCJsb2NhbE9iaiIsImxvY2FsU3RvcmFnZSIsIkpTT04iLCJwYXJzZSIsImdldEl0ZW0iLCJzZXJpYWxPYmoiLCJzdHJpbmdpZnkiLCJ0aGlzIiwibG9jYWxLZXkiLCJzZXRJdGVtIiwibG9jYWxTdG9yYWdlRGF0YSIsImdldEZyb21TdG9yYWdlIiwiZ2V0RGF0YVRhYiIsImFkZFRvU3RvcmFnZSIsInByaW50SHRtbCIsImluaXQiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUNBSyxjQUFBLEVBQ0FDLFlBQUEsRUFDQUMsSUFBQU4sS0FNQVosRUFBQW1CLEVBQUEsU0FBQWpCLEdBQ0FZLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURrQixPQUFBLEtBSWpEcEIsRUFBQXFCLEVBQUEsU0FBQWxCLEdBQ0EsSUFBQVMsRUFBQVQsS0FBQW1CLFdBQ0EsV0FBMkIsT0FBQW5CLEVBQUEsU0FDM0IsV0FBaUMsT0FBQUEsR0FFakMsT0FEQUgsRUFBQVUsRUFBQUUsRUFBQSxJQUFBQSxHQUNB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QW1ELGFBSUFkLEVBQUFlLGFBQUFoRCxxQkFBd0RoQixFQUFBLFdBR3hEWSxFQUFBcUQsVUFBQWhCLEVBQUFhLGtDQUFvRTlELEVBQUEsaUJBS3BFWSxFQUFBcUQsVUFBQUosTUMzQkFLIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnQgY29uc3QgZ2V0UGFyYW1VcmxWYWwgPSAobmFtZVBhcmFtKSA9PiB7XG4gICAgbGV0IHBhcmFtQXJyID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJyYnKS5maWx0ZXIoIChpdGVtKSA9PiAoaXRlbS5pbmRleE9mKG5hbWVQYXJhbSkgPj0gMCkgPyBpdGVtIDogJycgKTtcbiAgICBsZXQgdGV4dCA9IHBhcmFtQXJyLnRvU3RyaW5nKCkuc3BsaXQoJz0nKTtcblxuICAgIHJldHVybiB0ZXh0W3RleHQubGVuZ3RoIC0gMV07XG59O1xuXG4iLCJpbXBvcnQgeyBnZXRQYXJhbVVybFZhbCB9IGZyb20gJy4vaGVscGVycy9oZWxwZXJzJztcblxuY2xhc3MgVmlldyB7XG4gICAgY29uc3RydWN0b3IoKXtcblxuICAgIH1cblxuICAgIHN0YXRpYyBnZXREYXRhVGFiKCl7XG5cbiAgICAgICAgbGV0IHRpdGxlcyA9IFtdO1xuXG4gICAgICAgIGxldCBwYWdlTnVtID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJyYnKTtcblxuICAgICAgICBsZXQgZGF0YSA9IHtcbiAgICAgICAgICAgIHN1bW1fcGFnZTogMCxcbiAgICAgICAgICAgIHNhdmluaW5nczogMCxcbiAgICAgICAgICAgIGFsbFN1bW06IDAsXG4gICAgICAgICAgICBhbGxTYXZpbmluZ3M6IDAsXG4gICAgICAgICAgICBzdGFydERhdGU6IGdldFBhcmFtVXJsVmFsKCdzdGFydERhdGUnKSxcbiAgICAgICAgICAgIGVuZERhdGU6IGdldFBhcmFtVXJsVmFsKCdlbmREYXRlJyksXG4gICAgICAgICAgICBjdXJyZW50UGFnZTogKHBhZ2VOdW1bcGFnZU51bS5sZW5ndGggLSAxXS5pbmRleE9mKCdwYWdlJykgPj0gMCApID8gcGFnZU51bVtwYWdlTnVtLmxlbmd0aCAtIDFdIDogJ3BhZ2U9MSdcbiAgICAgICAgfTtcblxuXG5cblxuICAgICAgICBsZXQgdGhIdG1sRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub3BlcmF0aW9ucy10YWJsZSB0aGVhZCB0ciB0aCcpO1xuICAgICAgICBsZXQgdHJIdG1sRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub3BlcmF0aW9ucy10YWJsZSB0Ym9keSB0cicpO1xuXG4gICAgICAgIE9iamVjdC5rZXlzKHRoSHRtbEVsZW1lbnRzKS5mb3JFYWNoKCAoaXRlbSwgaW5kZXgpID0+IHRpdGxlcy5wdXNoKHRoSHRtbEVsZW1lbnRzW2luZGV4XS5pbm5lclRleHQpICk7XG5cbiAgICAgICAgY29uc3QgaW5kZXhTYXZpbmluZ3MgPSB0aXRsZXMuaW5kZXhPZign0KHQutC40LTQutCwLCDQs9GA0L0nKTtcbiAgICAgICAgY29uc3QgaW5kZXhTdW1tID0gdGl0bGVzLmluZGV4T2YoJ9Ch0YPQvNC80LAnKTtcblxuXG4gICAgICAgIE9iamVjdC5rZXlzKHRySHRtbEVsZW1lbnRzKS5mb3JFYWNoKCAoaXRlbSwgaW5kZXgpID0+IHtcblxuICAgICAgICAgICAgZGF0YS5zdW1tX3BhZ2UgKz0gTWF0aC5yb3VuZCh0ckh0bWxFbGVtZW50c1tpbmRleF0uY2hpbGRyZW5baW5kZXhTdW1tXS5pbm5lclRleHQpO1xuICAgICAgICAgICAgZGF0YS5zYXZpbmluZ3MgKz0gTWF0aC5yb3VuZCh0ckh0bWxFbGVtZW50c1tpbmRleF0uY2hpbGRyZW5baW5kZXhTYXZpbmluZ3NdLmlubmVyVGV4dCk7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IHsgc3VtbV9wYWdlLCBzYXZpbmluZ3MgfSA9IGRhdGE7XG5cbiAgICAgICAgZGF0YS5hbGxTdW1tICs9IHN1bW1fcGFnZTtcbiAgICAgICAgZGF0YS5hbGxTYXZpbmluZ3MgKz0gc2F2aW5pbmdzO1xuXG4gICAgICAgIGxldCB7IGFsbFN1bW0sIGFsbFNhdmluaW5ncyB9ID0gZGF0YTtcblxuICAgICAgICBjb25zb2xlLmxvZyhg0KHRg9C80LzQsCAtICR7c3VtbV9wYWdlfSDQs9GA0L1gKTtcbiAgICAgICAgY29uc29sZS5sb2coYNCh0LrQuNC00LrQsCAtICR7c2F2aW5pbmdzfSDQs9GA0L1gKTtcbiAgICAgICAgY29uc29sZS5sb2coYNCe0LHRidCw0Y8g0YHRg9C80LzQsCAtICR7YWxsU3VtbX0g0LPRgNC9YCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGDQodGD0LzQvNCw0YDQvdCw0Y8g0YHQutC40LTQutCwIC0gJHthbGxTYXZpbmluZ3N9INCz0YDQvWApO1xuICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcblxuXG4gICAgICAgIHJldHVybiBkYXRhO1xuXG5cbiAgICB9XG5cblxuXG4gICAgc3RhdGljIHByaW50SHRtbChkYXRhKXtcblxuXG5cbiAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGRpdi5jbGFzc05hbWUgPSAnYi1yb2RuaWtTdGF0cy1iYXInO1xuICAgICAgICBkaXYuaW5uZXJIVE1MID0gYDxwPtCh0YPQvNC80LAgLSAke2RhdGEuc3VtbV9wYWdlfSDQs9GA0L08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgPHA+0KHQutC40LTQutCwIC0gJHtkYXRhLnNhdmluaW5nc30g0LPRgNC9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgIDxwPtCe0LHRidCw0Y8g0YHRg9C80LzQsCAtICR7ZGF0YS5hbGxTdW1tfSDQs9GA0L08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgPHA+0KHRg9C80LzQsNGA0L3QsNGPINGB0LrQuNC00LrQsCAtICR7ZGF0YS5hbGxTYXZpbmluZ3N9INCz0YDQvTwvcD5gO1xuXG4gICAgICAgIGNvbnN0IHBhcmVudERvY3VtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGFibGUub3BlcmF0aW9ucy10YWJsZScpLnBhcmVudE5vZGU7XG4gICAgICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGFibGUub3BlcmF0aW9ucy10YWJsZScpO1xuXG4gICAgICAgIHBhcmVudERvY3VtZW50Lmluc2VydEJlZm9yZShkaXYsIHRhYmxlKTtcblxuICAgIH1cblxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IFZpZXc7XG4iLCJjbGFzcyBNb2RlbHtcbiAgICBjb25zdHJ1Y3Rvcigpe1xuXG4gICAgfVxuXG4gICAgc3RhdGljIGFkZFRvU3RvcmFnZShkYXRhLCBrZXkpe1xuXG4gICAgICAgIGxldCBsb2NhbE9iaiA9IHt9O1xuXG4gICAgICAgIGZvcihsZXQgaSA9IDE7IGkgPD0gbG9jYWxTdG9yYWdlLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIGxvY2FsT2JqW2ldID0gKEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oYHJvZG5pay1leHQtcGFnZT0ke2l9YCkpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZygnYWRkVG9TdG9yYWdlJywgbG9jYWxPYmopO1xuXG4gICAgICAgIE9iamVjdC5rZXlzKGxvY2FsT2JqKS5mb3JFYWNoKCAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgZGF0YS5hbGxTYXZpbmluZ3MgKz0gbG9jYWxPYmpbaXRlbV0uc2F2aW5pbmdzO1xuICAgICAgICAgICAgZGF0YS5hbGxTdW1tICs9IGxvY2FsT2JqW2l0ZW1dLnN1bW1fcGFnZTtcblxuICAgICAgICB9KTtcblxuXG4gICAgICAgIGNvbnN0IHNlcmlhbE9iaiA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuXG4gICAgICAgIHRoaXMubG9jYWxLZXkgPSBrZXk7XG5cbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5sb2NhbEtleSwgc2VyaWFsT2JqKTtcblxuICAgIH1cblxuICAgIHN0YXRpYyBnZXRGcm9tU3RvcmFnZShrZXkpe1xuICAgICAgICBjb25zdCBvYmogPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIC8vIHN0YXRpYyBhZGRDb3VudFN1bW0obG9jYWxfaWQpe1xuICAgIC8vXG4gICAgLy8gICAgIGlmKGxvY2FsX2lkID09IG51bGwpe1xuICAgIC8vXG4gICAgLy8gICAgIGxldCBsb2NhbE9iaiA9IHt9O1xuICAgIC8vXG4gICAgLy8gICAgIGZvcihsZXQgaSA9IDE7IGkgPD0gbG9jYWxTdG9yYWdlLmxlbmd0aDsgaSsrKXtcbiAgICAvLyAgICAgICAgIGxvY2FsT2JqW2ldID0gKEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oYHJvZG5pay1leHQtcGFnZT0ke2l9YCkpKTtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgICBjb25zb2xlLmxvZyhsb2NhbE9iaik7XG4gICAgLy9cbiAgICAvLyAgICAgT2JqZWN0LmtleXMobG9jYWxPYmopLmZvckVhY2goIChpdGVtKSA9PiBkYXRhLmFsbFNhdmluaW5ncyArPSBsb2NhbE9ialtpdGVtXS5zYXZpbmluZ3MgKTtcbiAgICAvLyAgICAgT2JqZWN0LmtleXMobG9jYWxPYmopLmZvckVhY2goIChpdGVtKSA9PiBkYXRhLmFsbFN1bW0gKz0gbG9jYWxPYmpbaXRlbV0uc3VtbV9wYWdlICk7XG4gICAgLy9cbiAgICAvLyAgICAgfVxuICAgIC8vXG4gICAgLy9cbiAgICAvLyAgICAgcmV0dXJuIHJlcG9ydDtcbiAgICAvLyB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE1vZGVsOyIsImltcG9ydCBWaWV3IGZyb20gJy4vdmlldyc7XG5pbXBvcnQgTW9kZWwgZnJvbSAnLi9tb2RlbCc7XG5pbXBvcnQgeyBnZXRQYXJhbVVybFZhbCB9IGZyb20gJy4vaGVscGVycy9oZWxwZXJzJztcblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lKXtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcblxuICAgIH1cblxuICAgIHN0YXRpYyBpbml0KCl7XG5cbiAgICAgICAgY29uc29sZS5sb2coZ2V0UGFyYW1VcmxWYWwoJ3BhZ2UnKSk7XG5cbiAgICAgICAgbGV0IGxvY2FsU3RvcmFnZURhdGEgPSBNb2RlbC5nZXRGcm9tU3RvcmFnZShgcm9kbmlrLWV4dC1wYWdlPSR7Z2V0UGFyYW1VcmxWYWwoJ3BhZ2UnKX1gKTtcbiAgICAgICAgY29uc29sZS5sb2cobG9jYWxTdG9yYWdlRGF0YSk7XG5cbiAgICAgICAgaWYobG9jYWxTdG9yYWdlRGF0YSA9PT0gbnVsbCl7XG4gICAgICAgICAgICBsZXQgZGF0YSA9IFZpZXcuZ2V0RGF0YVRhYigpO1xuXG4gICAgICAgICAgICAvLyBNb2RlbC5hZGRDb3VudFN1bW0oYHJvZG5pay1leHQtcGFnZT0ke2dldFBhcmFtVXJsVmFsKCdwYWdlJyl9YCk7XG5cbiAgICAgICAgICAgIE1vZGVsLmFkZFRvU3RvcmFnZShkYXRhLCBgcm9kbmlrLWV4dC1wYWdlPSR7Z2V0UGFyYW1VcmxWYWwoJ3BhZ2UnKX1gKTtcblxuXG4gICAgICAgICAgICBWaWV3LnByaW50SHRtbCggTW9kZWwuZ2V0RnJvbVN0b3JhZ2UoYHJvZG5pay1leHQtcGFnZT0ke2dldFBhcmFtVXJsVmFsKCdwYWdlJyl9YCkgKTtcblxuXG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFZpZXcucHJpbnRIdG1sKGxvY2FsU3RvcmFnZURhdGEpO1xuXG4gICAgICAgIH1cblxuXG5cblxuXG5cblxuXG4gICAgfVxuXG59XG4iLCJpbXBvcnQgQ29udHJvbGxlciBmcm9tICcuL2NvbnRyb2xsZXInO1xuXG4vLyBsZXQgY29udHIgPSBuZXcgQ29udHJvbGxlcignVGVzdCBjbGFzcycpO1xuXG5Db250cm9sbGVyLmluaXQoKTtcblxuLy8gY29uc29sZS5sb2coYFRlc3QgY29uZmlnICR7MSsyfWApO1xuXG4vL1xuLy8gKGZ1bmN0aW9uKCl7XG4vL1xuLy9cbi8vICAgICAvL1xuLy8gICAgIC8vIGNocm9tZS50YWJzLnF1ZXJ5KHsgYWN0aXZlOiB0cnVlLCBjdXJyZW50V2luZG93OiB0cnVlIH0sICh0YWJzKSA9PiB7XG4vLyAgICAgLy8gICAgIGxldCB0YWIgPSB0YWJzWzBdXG4vLyAgICAgLy8gICAgIGNvbnNvbGUubG9nKHRhYik7XG4vLyAgICAgLy9cbi8vICAgICAvLyB9KTtcbi8vXG4vL1xuLy8gICAgIC8vIGNocm9tZS50YWJzLmV4ZWN1dGVTY3JpcHQobnVsbCwge2ZpbGU6IFwiLi9kaXN0L2pzL2VuZ2luZS5qc1wifSk7XG4vL1xuLy8gICAgIC8vXG4vLyAgICAgLy8gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbi8vICAgICAvL1xuLy8gICAgIC8vIH0pO1xuLy9cbi8vXG4vL1xuLy8gfSkoKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=