!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const o=e=>{let t=window.location.href.split("&").filter(t=>t.indexOf(e)>=0?t:"").toString().split("=");return t[t.length-1]},a=()=>{return document.querySelectorAll(".pagination li.active a")[0].innerHTML},l=e=>{if(!(Object.keys(e).length>0))throw new Error("Params aren't is object");for(let t in e)if(e.hasOwnProperty(t))if(e[t].split(" ").length>1){document.querySelectorAll(e[t])[0].addEventListener("click",()=>window.localStorage.clear())}else{document.getElementById(e[t]).addEventListener("change",()=>window.localStorage.clear())}return console.log(e)};var r=class{constructor(){}static getDataTab(){let e=[],t={summ_page:0,savinings:0,allSumm:0,allSavinings:0,startDate:o("startDate"),endDate:o("endDate"),currentPage:`page=${a()}`},n=document.querySelectorAll(".operations-table thead tr th"),l=document.querySelectorAll(".operations-table tbody tr");Object.keys(n).forEach((t,o)=>e.push(n[o].innerText));const r=e.indexOf("Скидка, грн"),i=e.indexOf("Сумма");Object.keys(l).forEach((e,n)=>{t.summ_page+=Math.round(l[n].children[i].innerText),t.savinings+=Math.round(l[n].children[r].innerText)});let{summ_page:c,savinings:s}=t;t.allSumm+=c,t.allSavinings+=s;let{allSumm:g,allSavinings:u}=t;return console.log(`Сумма - ${c} грн`),console.log(`Скидка - ${s} грн`),console.log(`Общая сумма - ${g} грн`),console.log(`Суммарная скидка - ${u} грн`),console.log(t),t}static printHtml(e){let t=parseInt(localStorage.getItem("rodnik-ext-allSavinigs")),n=parseInt(localStorage.getItem("rodnik-ext-allSumm"));const o=document.createElement("div");o.className="b-rodnikStats-bar",o.id="rodnik-container",o.innerHTML=`<p>Общая сумма - ${n} грн</p>\n                         <p>Суммарная скидка - ${t} грн</p>`;const a=document.querySelector("table.operations-table").parentNode,l=document.querySelector("table.operations-table");a.insertBefore(o,l)}};var i=class{constructor(){}static addToStorage(e,t){const{savinings:n,summ_page:o}=e;if(null!==localStorage.getItem("rodnik-ext-allSavinigs")&&null!==localStorage.getItem("rodnik-ext-allSumm")){let e=parseInt(localStorage.getItem("rodnik-ext-allSavinigs")),t=parseInt(localStorage.getItem("rodnik-ext-allSumm"));localStorage.setItem("rodnik-ext-allSavinigs",e+=n),localStorage.setItem("rodnik-ext-allSumm",t+=o)}else localStorage.setItem("rodnik-ext-allSavinigs",n),localStorage.setItem("rodnik-ext-allSumm",o);const a=JSON.stringify(e);this.localKey=t,localStorage.setItem(this.localKey,a)}static getFromStorage(e){return JSON.parse(localStorage.getItem(e))}};const c={datepickerBtn:"#datepicker span.btn",dataRange:"dateRangePreset",locationSelect:"locationSelect",operationType:"operationTypeSelect"};document.querySelectorAll(".operations-table tbody tr").length>0?class{constructor(){}static init(){let e=i.getFromStorage(`rodnik-ext-page=${a()}`);if(null===e){let e=r.getDataTab();i.addToStorage(e,`rodnik-ext-page=${a()}`),r.printHtml(i.getFromStorage(`rodnik-ext-page=${a()}`))}else r.printHtml(e);l(c)}}.init():window.localStorage.clear()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hlbHBlcnMvaGVscGVycy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlldy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsInZhbHVlIiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnZXRQYXJhbVVybFZhbCIsIm5hbWVQYXJhbSIsInRleHQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJzcGxpdCIsImZpbHRlciIsIml0ZW0iLCJpbmRleE9mIiwidG9TdHJpbmciLCJsZW5ndGgiLCJnZXRQYWdlTnVtIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5uZXJIVE1MIiwiY2xlYXJMb2NhbFN0b3JhZ2UiLCJlbGVtZW50cyIsImtleXMiLCJFcnJvciIsImtleSIsImFkZEV2ZW50TGlzdGVuZXIiLCJsb2NhbFN0b3JhZ2UiLCJjbGVhciIsImdldEVsZW1lbnRCeUlkIiwiY29uc29sZSIsImxvZyIsInZpZXciLCJbb2JqZWN0IE9iamVjdF0iLCJ0aXRsZXMiLCJkYXRhIiwic3VtbV9wYWdlIiwic2F2aW5pbmdzIiwiYWxsU3VtbSIsImFsbFNhdmluaW5ncyIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJjdXJyZW50UGFnZSIsInRoSHRtbEVsZW1lbnRzIiwidHJIdG1sRWxlbWVudHMiLCJmb3JFYWNoIiwiaW5kZXgiLCJwdXNoIiwiaW5uZXJUZXh0IiwiaW5kZXhTYXZpbmluZ3MiLCJpbmRleFN1bW0iLCJNYXRoIiwicm91bmQiLCJjaGlsZHJlbiIsImFsbFNhdmluaWdzIiwicGFyc2VJbnQiLCJnZXRJdGVtIiwiZGl2IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImlkIiwicGFyZW50RG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicGFyZW50Tm9kZSIsInRhYmxlIiwiaW5zZXJ0QmVmb3JlIiwibW9kZWwiLCJzZXRJdGVtIiwic2VyaWFsT2JqIiwiSlNPTiIsInN0cmluZ2lmeSIsInRoaXMiLCJsb2NhbEtleSIsInBhcnNlIiwiRVZFTlRUQUdTIiwiZGF0ZXBpY2tlckJ0biIsImRhdGFSYW5nZSIsImxvY2F0aW9uU2VsZWN0Iiwib3BlcmF0aW9uVHlwZSIsImxvY2FsU3RvcmFnZURhdGEiLCJnZXRGcm9tU3RvcmFnZSIsImdldERhdGFUYWIiLCJhZGRUb1N0b3JhZ2UiLCJwcmludEh0bWwiLCJpbml0Il0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FDQUssY0FBQSxFQUNBQyxZQUFBLEVBQ0FDLElBQUFOLEtBTUFaLEVBQUFtQixFQUFBLFNBQUFqQixHQUNBWSxPQUFBQyxlQUFBYixFQUFBLGNBQWlEa0IsT0FBQSxLQUlqRHBCLEVBQUFxQixFQUFBLFNBQUFsQixHQUNBLElBQUFTLEVBQUFULEtBQUFtQixXQUNBLFdBQTJCLE9BQUFuQixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFILEVBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBVSxFQUFBQyxHQUFzRCxPQUFBVixPQUFBVyxVQUFBQyxlQUFBbkIsS0FBQWdCLEVBQUFDLElBR3REeEIsRUFBQTJCLEVBQUEsR0FJQTNCLElBQUE0QixFQUFBLHlDQ25FQSxNQUFBQyxFQUFBQyxJQUNBLElBRUFDLEVBRkFDLE9BQUFDLFNBQUFDLEtBQUFDLE1BQUEsS0FBQUMsT0FBQUMsS0FBQUMsUUFBQVIsSUFBQSxFQUFBTyxFQUFBLElBRUFFLFdBQUFKLE1BQUEsS0FFQSxPQUFBSixJQUFBUyxPQUFBLElBR0FDLEVBQUEsS0FFQSxPQURBQyxTQUFBQyxpQkFBQSwyQkFDQSxHQUFBQyxXQUdBQyxFQUFBQyxJQUVBLEtBQUFoQyxPQUFBaUMsS0FBQUQsR0FBQU4sT0FBQSxHQXlCQSxVQUFBUSxNQUFBLDJCQXZCQSxRQUFBQyxLQUFBSCxFQUVBLEdBQUFBLEVBQUFwQixlQUFBdUIsR0FFQSxHQUFBSCxFQUFBRyxHQUFBZCxNQUFBLEtBQUFLLE9BQUEsR0FFQUUsU0FBQUMsaUJBQUFHLEVBQUFHLElBRUEsR0FBQUMsaUJBQUEsWUFBQWxCLE9BQUFtQixhQUFBQyxhQUdpQixDQUVqQlYsU0FBQVcsZUFBQVAsRUFBQUcsSUFFQUMsaUJBQUEsYUFBQWxCLE9BQUFtQixhQUFBQyxTQVdBLE9BQUFFLFFBQUFDLElBQUFULElDaUNBLElBQUFVLFFBekVBQyxlQUlBQSxvQkFFQSxJQUFBQyxLQUtBQyxHQUNBQyxVQUFBLEVBQ0FDLFVBQUEsRUFDQUMsUUFBQSxFQUNBQyxhQUFBLEVBQ0FDLFVBQUFuQyxFQUFBLGFBQ0FvQyxRQUFBcEMsRUFBQSxXQUNBcUMsb0JBQWlDekIsT0FHakMwQixFQUFBekIsU0FBQUMsaUJBQUEsaUNBQ0F5QixFQUFBMUIsU0FBQUMsaUJBQUEsOEJBRUE3QixPQUFBaUMsS0FBQW9CLEdBQUFFLFFBQUEsQ0FBQWhDLEVBQUFpQyxJQUFBWixFQUFBYSxLQUFBSixFQUFBRyxHQUFBRSxZQUVBLE1BQUFDLEVBQUFmLEVBQUFwQixRQUFBLGVBQ0FvQyxFQUFBaEIsRUFBQXBCLFFBQUEsU0FFQXhCLE9BQUFpQyxLQUFBcUIsR0FBQUMsUUFBQSxDQUFBaEMsRUFBQWlDLEtBRUFYLEVBQUFDLFdBQUFlLEtBQUFDLE1BQUFSLEVBQUFFLEdBQUFPLFNBQUFILEdBQUFGLFdBQ0FiLEVBQUFFLFdBQUFjLEtBQUFDLE1BQUFSLEVBQUFFLEdBQUFPLFNBQUFKLEdBQUFELGFBSUEsSUFBQVosVUFBYUEsRUFBQUMsYUFBdUJGLEVBRXBDQSxFQUFBRyxTQUFBRixFQUNBRCxFQUFBSSxjQUFBRixFQUVBLElBQUFDLFFBQWFBLEVBQUFDLGdCQUF3QkosRUFRckMsT0FOQUwsUUFBQUMsZUFBK0JLLFNBQy9CTixRQUFBQyxnQkFBZ0NNLFNBQ2hDUCxRQUFBQyxxQkFBcUNPLFNBQ3JDUixRQUFBQywwQkFBMENRLFNBQzFDVCxRQUFBQyxJQUFBSSxHQUVBQSxFQUlBRixpQkFBQUUsR0FFQSxJQUFBbUIsRUFBQUMsU0FBQTVCLGFBQUE2QixRQUFBLDJCQUNBbEIsRUFBQWlCLFNBQUE1QixhQUFBNkIsUUFBQSx1QkFFQSxNQUFBQyxFQUFBdkMsU0FBQXdDLGNBQUEsT0FDQUQsRUFBQUUsVUFBQSxvQkFDQUYsRUFBQUcsR0FBQSxtQkFDQUgsRUFBQXJDLDhCQUE0Q2tCLDZEQUNLZ0IsWUFFakQsTUFBQU8sRUFBQTNDLFNBQUE0QyxjQUFBLDBCQUFBQyxXQUNBQyxFQUFBOUMsU0FBQTRDLGNBQUEsMEJBRUFELEVBQUFJLGFBQUFSLEVBQUFPLEtDN0JBLElBQUFFLFFBeENBakMsZUFJQUEsb0JBQUFFLEVBQUFWLEdBRUEsTUFBQVksVUFBZUEsRUFBQUQsYUFBdUJELEVBR3RDLFVBQUFSLGFBQUE2QixRQUFBLGtDQUFBN0IsYUFBQTZCLFFBQUEsdUJBRUEsSUFBQUYsRUFBQUMsU0FBQTVCLGFBQUE2QixRQUFBLDJCQUNBbEIsRUFBQWlCLFNBQUE1QixhQUFBNkIsUUFBQSx1QkFFQTdCLGFBQUF3QyxRQUFBLHlCQUFBYixHQUFBakIsR0FDQVYsYUFBQXdDLFFBQUEscUJBQUE3QixHQUFBRixRQUtBVCxhQUFBd0MsUUFBQSx5QkFBQTlCLEdBQ0FWLGFBQUF3QyxRQUFBLHFCQUFBL0IsR0FJQSxNQUFBZ0MsRUFBQUMsS0FBQUMsVUFBQW5DLEdBRUFvQyxLQUFBQyxTQUFBL0MsRUFFQUUsYUFBQXdDLFFBQUFJLEtBQUFDLFNBQUFKLEdBSUFuQyxzQkFBQVIsR0FFQSxPQURBNEMsS0FBQUksTUFBQTlDLGFBQUE2QixRQUFBL0IsTUM5QkEsTUFBQWlELEdBQ0FDLGNBQUEsdUJBQ0FDLFVBQUEsa0JBQ0FDLGVBQUEsaUJBQ0FDLGNBQUEsdUJDTkE1RCxTQUFBQyxpQkFBQSw4QkFBQUgsT0FBQSxRRFdBaUIsZUFJQUEsY0FFQSxJQUFBOEMsRUFBQWIsRUFBQWMsa0NBQXVFL0QsT0FFdkUsVUFBQThELEVBQUEsQ0FDQSxJQUFBNUMsRUFBQUgsRUFBQWlELGFBRUFmLEVBQUFnQixhQUFBL0MscUJBQXdEbEIsT0FFeERlLEVBQUFtRCxVQUFBakIsRUFBQWMsa0NBQW9FL0QsYUFHcEVlLEVBQUFtRCxVQUFBSixHQUdBMUQsRUFBQXFELEtDN0JBVSxPQUVBNUUsT0FBQW1CLGFBQUFDIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnQgY29uc3QgZ2V0UGFyYW1VcmxWYWwgPSAobmFtZVBhcmFtKSA9PiB7XG4gICAgbGV0IHBhcmFtQXJyID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJyYnKS5maWx0ZXIoIChpdGVtKSA9PiAoaXRlbS5pbmRleE9mKG5hbWVQYXJhbSkgPj0gMCApID8gaXRlbSA6ICcnICk7XG5cbiAgICBsZXQgdGV4dCA9IHBhcmFtQXJyLnRvU3RyaW5nKCkuc3BsaXQoJz0nKTtcblxuICAgIHJldHVybiB0ZXh0W3RleHQubGVuZ3RoIC0gMV07XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0UGFnZU51bSA9ICgpID0+IHtcbiAgICBsZXQgbmV3UGFnZU51bSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYWdpbmF0aW9uIGxpLmFjdGl2ZSBhJyk7XG4gICAgcmV0dXJuIG5ld1BhZ2VOdW1bMF0uaW5uZXJIVE1MO1xufVxuXG5leHBvcnQgY29uc3QgY2xlYXJMb2NhbFN0b3JhZ2UgPSAoZWxlbWVudHMpID0+IHtcblxuICAgIGlmKCBPYmplY3Qua2V5cyhlbGVtZW50cykubGVuZ3RoID4gMCApe1xuXG4gICAgICAgIGZvciggbGV0IGtleSBpbiBlbGVtZW50cyl7XG5cbiAgICAgICAgICAgIGlmKCBlbGVtZW50cy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cbiAgICAgICAgICAgICAgICBpZihlbGVtZW50c1trZXldLnNwbGl0KCcgJykubGVuZ3RoID4gMSl7XG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IHNlbGVjdG9yQWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlbGVtZW50c1trZXldKTtcblxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RvckFsbFswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+ICB3aW5kb3cubG9jYWxTdG9yYWdlLmNsZWFyKCkpO1xuXG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBlbGVtZW50QnlJRCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRzW2tleV0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRCeUlELmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+ICB3aW5kb3cubG9jYWxTdG9yYWdlLmNsZWFyKCkpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBhcmFtcyBhcmVuJ3QgaXMgb2JqZWN0XCIpO1xuICAgIH1cblxuICAgIHJldHVybiBjb25zb2xlLmxvZyhlbGVtZW50cyk7XG59O1xuXG4iLCJpbXBvcnQgeyBnZXRQYXJhbVVybFZhbCwgZ2V0UGFnZU51bSB9IGZyb20gJy4vaGVscGVycy9oZWxwZXJzJztcblxuY2xhc3MgVmlldyB7XG4gICAgY29uc3RydWN0b3IoKXtcblxuICAgIH1cblxuICAgIHN0YXRpYyBnZXREYXRhVGFiKCl7XG5cbiAgICAgICAgbGV0IHRpdGxlcyA9IFtdO1xuXG5cblxuXG4gICAgICAgIGxldCBkYXRhID0ge1xuICAgICAgICAgICAgc3VtbV9wYWdlOiAwLFxuICAgICAgICAgICAgc2F2aW5pbmdzOiAwLFxuICAgICAgICAgICAgYWxsU3VtbTogMCxcbiAgICAgICAgICAgIGFsbFNhdmluaW5nczogMCxcbiAgICAgICAgICAgIHN0YXJ0RGF0ZTogZ2V0UGFyYW1VcmxWYWwoJ3N0YXJ0RGF0ZScpLFxuICAgICAgICAgICAgZW5kRGF0ZTogZ2V0UGFyYW1VcmxWYWwoJ2VuZERhdGUnKSxcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiBgcGFnZT0ke2dldFBhZ2VOdW0oKX1gXG4gICAgICAgIH07XG5cbiAgICAgICAgbGV0IHRoSHRtbEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm9wZXJhdGlvbnMtdGFibGUgdGhlYWQgdHIgdGgnKTtcbiAgICAgICAgbGV0IHRySHRtbEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm9wZXJhdGlvbnMtdGFibGUgdGJvZHkgdHInKTtcblxuICAgICAgICBPYmplY3Qua2V5cyh0aEh0bWxFbGVtZW50cykuZm9yRWFjaCggKGl0ZW0sIGluZGV4KSA9PiB0aXRsZXMucHVzaCh0aEh0bWxFbGVtZW50c1tpbmRleF0uaW5uZXJUZXh0KSApO1xuXG4gICAgICAgIGNvbnN0IGluZGV4U2F2aW5pbmdzID0gdGl0bGVzLmluZGV4T2YoJ9Ch0LrQuNC00LrQsCwg0LPRgNC9Jyk7XG4gICAgICAgIGNvbnN0IGluZGV4U3VtbSA9IHRpdGxlcy5pbmRleE9mKCfQodGD0LzQvNCwJyk7XG5cbiAgICAgICAgT2JqZWN0LmtleXModHJIdG1sRWxlbWVudHMpLmZvckVhY2goIChpdGVtLCBpbmRleCkgPT4ge1xuXG4gICAgICAgICAgICBkYXRhLnN1bW1fcGFnZSArPSBNYXRoLnJvdW5kKHRySHRtbEVsZW1lbnRzW2luZGV4XS5jaGlsZHJlbltpbmRleFN1bW1dLmlubmVyVGV4dCk7XG4gICAgICAgICAgICBkYXRhLnNhdmluaW5ncyArPSBNYXRoLnJvdW5kKHRySHRtbEVsZW1lbnRzW2luZGV4XS5jaGlsZHJlbltpbmRleFNhdmluaW5nc10uaW5uZXJUZXh0KTtcblxuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgeyBzdW1tX3BhZ2UsIHNhdmluaW5ncyB9ID0gZGF0YTtcblxuICAgICAgICBkYXRhLmFsbFN1bW0gKz0gc3VtbV9wYWdlO1xuICAgICAgICBkYXRhLmFsbFNhdmluaW5ncyArPSBzYXZpbmluZ3M7XG5cbiAgICAgICAgbGV0IHsgYWxsU3VtbSwgYWxsU2F2aW5pbmdzIH0gPSBkYXRhO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGDQodGD0LzQvNCwIC0gJHtzdW1tX3BhZ2V9INCz0YDQvWApO1xuICAgICAgICBjb25zb2xlLmxvZyhg0KHQutC40LTQutCwIC0gJHtzYXZpbmluZ3N9INCz0YDQvWApO1xuICAgICAgICBjb25zb2xlLmxvZyhg0J7QsdGJ0LDRjyDRgdGD0LzQvNCwIC0gJHthbGxTdW1tfSDQs9GA0L1gKTtcbiAgICAgICAgY29uc29sZS5sb2coYNCh0YPQvNC80LDRgNC90LDRjyDRgdC60LjQtNC60LAgLSAke2FsbFNhdmluaW5nc30g0LPRgNC9YCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuXG4gICAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgfVxuXG4gICAgc3RhdGljIHByaW50SHRtbChkYXRhKXtcblxuICAgICAgICBsZXQgYWxsU2F2aW5pZ3MgPSBwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncm9kbmlrLWV4dC1hbGxTYXZpbmlncycpKTtcbiAgICAgICAgbGV0IGFsbFN1bW0gPSBwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncm9kbmlrLWV4dC1hbGxTdW1tJykpO1xuXG4gICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBkaXYuY2xhc3NOYW1lID0gJ2Itcm9kbmlrU3RhdHMtYmFyJztcbiAgICAgICAgZGl2LmlkID0gJ3JvZG5pay1jb250YWluZXInO1xuICAgICAgICBkaXYuaW5uZXJIVE1MID0gYDxwPtCe0LHRidCw0Y8g0YHRg9C80LzQsCAtICR7YWxsU3VtbX0g0LPRgNC9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgIDxwPtCh0YPQvNC80LDRgNC90LDRjyDRgdC60LjQtNC60LAgLSAke2FsbFNhdmluaWdzfSDQs9GA0L08L3A+YDtcblxuICAgICAgICBjb25zdCBwYXJlbnREb2N1bWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlLm9wZXJhdGlvbnMtdGFibGUnKS5wYXJlbnROb2RlO1xuICAgICAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlLm9wZXJhdGlvbnMtdGFibGUnKTtcblxuICAgICAgICBwYXJlbnREb2N1bWVudC5pbnNlcnRCZWZvcmUoZGl2LCB0YWJsZSk7XG5cbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgVmlldzsiLCJjbGFzcyBNb2RlbHtcbiAgICBjb25zdHJ1Y3Rvcigpe1xuXG4gICAgfVxuXG4gICAgc3RhdGljIGFkZFRvU3RvcmFnZShkYXRhLCBrZXkpe1xuXG4gICAgICAgIGNvbnN0IHsgc2F2aW5pbmdzLCBzdW1tX3BhZ2UgfSA9IGRhdGE7XG5cblxuICAgICAgICBpZiggbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3JvZG5pay1leHQtYWxsU2F2aW5pZ3MnKSAhPT0gbnVsbCAmJiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncm9kbmlrLWV4dC1hbGxTdW1tJykgIT09IG51bGwpe1xuXG4gICAgICAgICAgICBsZXQgYWxsU2F2aW5pZ3MgPSBwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncm9kbmlrLWV4dC1hbGxTYXZpbmlncycpKTtcbiAgICAgICAgICAgIGxldCBhbGxTdW1tID0gcGFyc2VJbnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3JvZG5pay1leHQtYWxsU3VtbScpKTtcblxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3JvZG5pay1leHQtYWxsU2F2aW5pZ3MnLCBhbGxTYXZpbmlncyArPSBzYXZpbmluZ3MgKTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyb2RuaWstZXh0LWFsbFN1bW0nLCBhbGxTdW1tICs9IHN1bW1fcGFnZSApO1xuXG5cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3JvZG5pay1leHQtYWxsU2F2aW5pZ3MnLCBzYXZpbmluZ3MpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3JvZG5pay1leHQtYWxsU3VtbScsIHN1bW1fcGFnZSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNlcmlhbE9iaiA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuXG4gICAgICAgIHRoaXMubG9jYWxLZXkgPSBrZXk7XG5cbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5sb2NhbEtleSwgc2VyaWFsT2JqKTtcblxuICAgIH1cblxuICAgIHN0YXRpYyBnZXRGcm9tU3RvcmFnZShrZXkpe1xuICAgICAgICBjb25zdCBvYmogPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBNb2RlbDsiLCJpbXBvcnQgVmlldyBmcm9tICcuL3ZpZXcnO1xuaW1wb3J0IE1vZGVsIGZyb20gJy4vbW9kZWwnO1xuaW1wb3J0IHsgZ2V0UGFyYW1VcmxWYWwsIGNsZWFyTG9jYWxTdG9yYWdlLCBnZXRQYWdlTnVtIH0gZnJvbSAnLi9oZWxwZXJzL2hlbHBlcnMnO1xuXG5cbmNvbnN0IEVWRU5UVEFHUyA9IHtcbiAgICBkYXRlcGlja2VyQnRuOiAnI2RhdGVwaWNrZXIgc3Bhbi5idG4nLFxuICAgIGRhdGFSYW5nZTogJ2RhdGVSYW5nZVByZXNldCcsXG4gICAgbG9jYXRpb25TZWxlY3Q6ICdsb2NhdGlvblNlbGVjdCcsXG4gICAgb3BlcmF0aW9uVHlwZTogJ29wZXJhdGlvblR5cGVTZWxlY3QnXG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbnRyb2xsZXIge1xuICAgIGNvbnN0cnVjdG9yKCl7XG5cbiAgICB9XG5cbiAgICBzdGF0aWMgaW5pdCgpe1xuXG4gICAgICAgIGxldCBsb2NhbFN0b3JhZ2VEYXRhID0gTW9kZWwuZ2V0RnJvbVN0b3JhZ2UoYHJvZG5pay1leHQtcGFnZT0ke2dldFBhZ2VOdW0oKX1gKTtcblxuICAgICAgICBpZihsb2NhbFN0b3JhZ2VEYXRhID09PSBudWxsKXtcbiAgICAgICAgICAgIGxldCBkYXRhID0gVmlldy5nZXREYXRhVGFiKCk7XG5cbiAgICAgICAgICAgIE1vZGVsLmFkZFRvU3RvcmFnZShkYXRhLCBgcm9kbmlrLWV4dC1wYWdlPSR7Z2V0UGFnZU51bSgpfWApO1xuXG4gICAgICAgICAgICBWaWV3LnByaW50SHRtbCggTW9kZWwuZ2V0RnJvbVN0b3JhZ2UoYHJvZG5pay1leHQtcGFnZT0ke2dldFBhZ2VOdW0oKX1gKSApO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBWaWV3LnByaW50SHRtbChsb2NhbFN0b3JhZ2VEYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsZWFyTG9jYWxTdG9yYWdlKEVWRU5UVEFHUyk7XG5cbiAgICB9XG5cbn1cbiIsImltcG9ydCBDb250cm9sbGVyIGZyb20gJy4vY29udHJvbGxlcic7XG4vLyBpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuXG5pZiggZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm9wZXJhdGlvbnMtdGFibGUgdGJvZHkgdHInKS5sZW5ndGggPiAwICl7XG4gICAgQ29udHJvbGxlci5pbml0KCk7XG59IGVsc2Uge1xuICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbn1cblxuXG4vLyBWZXJzaW9uIDIgd2l0aCBQYXJzaW5nXG4vLyBheGlvcy5nZXQoIHdpbmRvdy5sb2NhdGlvbi5ocmVmIClcbi8vICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbi8vICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JvZG5pay1jb250YWluZXInKS5pbm5lckhUTUwgPSByZXNwb25zZS5kYXRhO1xuLy9cbi8vICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7XG4vLyAgICAgfSlcbi8vICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4vLyAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbi8vICAgICB9KTtcblxuXG5cbi8vXG4vLyAoZnVuY3Rpb24oKXtcbi8vXG4vL1xuLy8gICAgIC8vXG4vLyAgICAgLy8gY2hyb21lLnRhYnMucXVlcnkoeyBhY3RpdmU6IHRydWUsIGN1cnJlbnRXaW5kb3c6IHRydWUgfSwgKHRhYnMpID0+IHtcbi8vICAgICAvLyAgICAgbGV0IHRhYiA9IHRhYnNbMF1cbi8vICAgICAvLyAgICAgY29uc29sZS5sb2codGFiKTtcbi8vICAgICAvL1xuLy8gICAgIC8vIH0pO1xuLy9cbi8vXG4vLyAgICAgLy8gY2hyb21lLnRhYnMuZXhlY3V0ZVNjcmlwdChudWxsLCB7ZmlsZTogXCIuL2Rpc3QvanMvZW5naW5lLmpzXCJ9KTtcbi8vXG4vLyAgICAgLy9cbi8vICAgICAvLyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuLy8gICAgIC8vXG4vLyAgICAgLy8gfSk7XG4vL1xuLy9cbi8vXG4vLyB9KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==